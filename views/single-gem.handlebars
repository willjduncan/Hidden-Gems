<link href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/4.0.0/mdb.min.css" rel="stylesheet"/>
<script src='https://api.mapbox.com/mapbox-gl-js/v2.8.0/mapbox-gl.js'></script>
<link href='https://api.mapbox.com/mapbox-gl-js/v2.8.0/mapbox-gl.css' rel='stylesheet' />

<article class="post post-box">
    <div class="view gem-bg-img">
        <img class="gem-img" src="{{gem.pic}}" alt="">
        <div id="mask-arrange" class="mask">
            <h3 class="caption title gem-title c-five">{{gem.title}}</h3>
        </div>
    </div>
    <span class="post-header ml-gem mt-3 pt-2 mb-2">
        {{!-- Created by {{user.username}} on {{format_date created_at}} --}}
    </span>
  <div class="row info-box">
      <div class="col-sm-12 col-lg-5 info-border m-3">
          <h4 class="mt-2">By the Numbers</h4>
          <p>Annual Number of Visitors: {{gem.visitors}}</p>
      </div>
      <div class="col-sm-12 col-lg-5 info-border m-3">
          <h4 class="mt-2">Location</h4>
           {{#if city}}
            <p>{{gem.city}}, {{gem.state}}, {{gem.country}}</p>
            {{else}}
            <p>{{gem.state}}, {{gem.country}}</p>
            {{/if}}
          {{#if gem.lon}}
            <p>Latitude: {{gem.lat}}</p>
            <p>Longitude: {{gem.lon}} </p>
            {{/if}}
          
      </div>
    <div>
        <h4 id="desc-title" class="mt-3">Desription:</h4>
        <p class="desc-text mb-4">{{gem.description}}</p> 
    </div>
  </div>


    {{#if loggedIn}}
    <form class="comment-form mt-5">
        <div class="d-flex justify-content-around">
            <div class="col-sm-12 col-md-7 d-flex justify-content-between flex-wrap">
                {{#if gem.comments}}
                <h3 class="col-sm-12 col-md-7 mb-4"> {{gem.comments.length}} {{format_plural "Comment" gem.comments.length}}</h3>
                {{else}}
                <h3 class="col-sm-12 col-md-7 mb-4">Be the first to comment</h3>
                {{/if}}
                <input class="comment-input ml-3" name="comment-body" placeholder="Comment..." rows="1"></input>
                <button class="ml-1 mr-2 comment-btn" type="button">Add Comment</button>
            </div>
        <div class="col-sm-12 col-md-3 d-flex justify-content-center flex-wrap side-border">
            <h3 class="w-100 text-center"> {{gem.vote_count}} {{format_plural "point" gem.vote_count}}</h3>
            <button class="upvote-btn " type="submit">Upvote</button>
        </div>
        </div>
    </form>
    {{/if}}

    {{> comments gem.comments}}

    {{#if loggedIn}}
    <script src="/js/comment.js"></script>
    <script src="/js/upvoting.js"></script>
    {{/if}}
</article>

